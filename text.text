<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CONTROLE SUPPORT TI</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="/assets/css/styles.css">
    <link rel="stylesheet" href="/assets/css/moblie.css">
    <style>
        body {
            overflow: hidden;
            /* Desabilita o scroll do corpo */
        }

        .cabecalho {
            height: auto;
            /* Ajusta a altura automaticamente conforme o conteúdo */
        }

        .dados {
            overflow-y: scroll;
            /* Habilita o scroll apenas na sessão "dados" */
            overflow-x: hidden;
            /* Habilita o scroll apenas na sessão "dados" */
            height: calc(100vh - 220px);
            /* Calcula a altura dinamicamente */
        }

        /* Ocultar a barra de rolagem */
        ::-webkit-scrollbar {
            display: none;
            /* Para navegadores baseados em WebKit, como Chrome/Safari */
        }

        /* O mesmo para navegadores Firefox */
        /* Nota: Algumas versões do Firefox podem exigir prefixos de fornecedor adicionais */
        * {
            scrollbar-width: none;
        }

        .table thead th {
            background-color: #f8f9fa;
            /* Cor de fundo personalizada */
            color: #343a40;
            /* Cor do texto personalizada */
        }
    </style>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
 $(document).ready(function () {
    $('#submit_form').click(function () {
        var visibleForm = $('form:visible'); // Seleciona o formulário visível na tela
        var formData = visibleForm.serialize(); // Serializa os dados do formulário visível
        var actionUrl = visibleForm.attr('action'); // Obtém a URL de ação do formulário visível
        var nomeProduto = visibleForm.find('[name="nomeproduto"]').val(); // Obtém o valor do campo nomeproduto
        formData += '&nomeproduto=' + encodeURIComponent(nomeProduto); // Adiciona nomeproduto aos dados do formulário
        $.ajax({
            type: 'POST',
            url: actionUrl, // Usa a URL de ação do formulário visível
            data: formData, // Dados do formulário serializados
            success: function (response) {
                console.log('Dados enviados com sucesso:', response);
                // Faça algo com a resposta do servidor, se necessário
            },
            error: function (error) {
                console.error('Erro ao enviar dados:', error);
                // Lidar com o erro, se necessário
            }
        });
    });
});





</script>
</head>



<body>
    <section class="container-custom">


        <section class="cabecalho ">
            <div class="spacetitle"></div>

            </div>
            <div class="mt-5"></div>
            <div class="d-flex flex-column flex-md-row justify-content-md-between align-items-center">
                <p class="text-header">Adicionar</p>
                <div class="d-flex flex-column flex-md-row">
                    <button class=" additens order-1 me-md-2 my-1" type="button" data-bs-toggle="modal"
                        data-bs-target="#exampleModal">
                        Adicionar item
                    </button>
                </div>
            </div>
            <hr class="line">
        </section>

        <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content">

                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="exampleModalLabel">Adicione o item</h1>
                        <span class="px-3"></span>

                        <div class="dropdown">
                            <a id="dropdownMenuButton" class="btn btn-secondary dropdown-toggle" href="#"
                                role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Selecione uma categoria
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <li><a class="dropdown-item" href="#" data-item="Memória RAM">Memória RAM</a></li>
                                <li><a class="dropdown-item" href="#" data-item="Monitor">Monitor</a></li>
                                <li><a class="dropdown-item" href="#" data-item="Processador">Processador</a></li>
                                <li><a class="dropdown-item" href="#" data-item="Gabinete">Gabinete</a></li>
                                <li><a class="dropdown-item" href="#" data-item="Fonte">Fonte</a></li>
                                <li><a class="dropdown-item" href="#" data-item="motherboard">Placa Mãe</a></li>
                                <li><a class="dropdown-item" href="#" data-item="gpu">Placa de Vídeo</a></li>
                            </ul>
                            <input type="hidden" id="nomeproduto" name="nomeproduto">
                        </div>



                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body" id="dynamicFields">
                        <div style="height: 40vh; overflow-y: scroll;">



                            <div>
                                <form id="placas_video_form"  method="POST"
                                    style="display: none;">
                                    <input type="hidden" name="nomeproduto" id="nomeproduto_placas_video">

                                    <label class="form-label" for="codigo_de_barras">Código de Barras:</label>
                                    <input type="text" class="form-control" id="codigo_de_barras"
                                        name="codigo_de_barras"><br>

                                    <label class="form-label" for="marca">Marca:</label>
                                    <input type="text" class="form-control" id="marca" name="marca"><br>

                                    <label class="form-label" for="modelo">Modelo:</label>
                                    <input type="text" class="form-control" id="modelo" name="modelo"><br>

                                    <label class="form-label" for="ddr">DDR:</label>
                                    <input type="text" class="form-control" id="ddr" name="ddr"><br>

                                    <label class="form-label" for="numero_de_serie">Número de Série:</label>
                                    <input type="text" class="form-control" id="numero_de_serie"
                                        name="numero_de_serie"><br>

                                    <label class="form-label" for="portas_saida">Portas de Saída:</label>
                                    <input type="text" class="form-control" id="portas_saida" name="portas_saida"><br>

                                    <label class="form-label" for="observacao">Observação:</label>
                                    <textarea class="form-control" id="observacao" name="observacao"></textarea><br>

                                </form>


                                <form id="placas_mae_form"  method="POST"
                                    style="display: none;">

                                    <input type="hidden" name="nomeproduto" id="nomeproduto_placas_mae">

                                    <label class="form-label" for="codigo_de_barras">Código de Barras:</label>
                                    <input type="text" class="form-control" id="codigo_de_barras"
                                        name="codigo_de_barras"><br>

                                    <label class="form-label" for="marca">Marca:</label>
                                    <input type="text" class="form-control" id="marca" name="marca"><br>

                                    <label class="form-label" for="modelo">Modelo:</label>
                                    <input type="text" class="form-control" id="modelo" name="modelo"><br>

                                    <label class="form-label" for="numero_de_serie">Número de Série:</label>
                                    <input type="text" class="form-control" id="numero_de_serie"
                                        name="numero_de_serie"><br>

                                    <label class="form-label" for="tipo_soquete">Tipo de Soquete:</label>
                                    <input type="text" class="form-control" id="tipo_soquete" name="tipo_soquete"><br>

                                    <label class="form-label" for="slots_de_memoria">Slots de Memória:</label>
                                    <input type="text" class="form-control" id="slots_de_memoria"
                                        name="slots_de_memoria"><br>

                                    <label class="form-label" for="observacao">Observação:</label>
                                    <textarea class="form-control" id="observacao" name="observacao"></textarea><br>
                                </form>

                                <form id="fontes_form"  method="POST" style="display: none;">
                                    <input type="hidden" name="nomeproduto" id="nomeproduto_fontes">

                                    <label class="form-label" for="codigo_de_barras">Código de Barras:</label>
                                    <input type="text" class="form-control" id="codigo_de_barras"
                                        name="codigo_de_barras"><br>

                                    <label for="tipo">Tipo de Fonte</label>
                                    <div class="mt-3"></div>
                                    <div class="input-group mb-3">
                                        <select class="form-select" aria-label="Default select example" id="tipo"
                                            name="tipo">
                                            <option selected>Tipo de Fonte</option>
                                            <option value="Fonte Desktop">Fonte Desktop</option>
                                            <option value="Fonte Notebook">Fonte Notebook</option>
                                            <option value="Fonte G">Fonte G</option>
                                        </select>
                                    </div>

                                    <label class="form-label" for="modelo">Modelo:</label>
                                    <input type="text" class="form-control" id="modelo" name="modelo"><br>

                                    <label class="form-label" for="marca">Marca:</label>
                                    <input type="text" class="form-control" id="marca" name="marca"><br>

                                    <label class="form-label" for="numero_de_serie">Número de Série:</label>
                                    <input type="text" class="form-control" id="numero_de_serie"
                                        name="numero_de_serie"><br>

                                    <label class="form-label" for="potencia_watts">Potência em Watts:</label>
                                    <input type="number" class="form-control" id="potencia_watts"
                                        name="potencia_watts"><br>

                                    <label class="form-label" for="amperagem">Amperagem:</label>
                                    <input type="number" class="form-control" id="amperagem" name="amperagem"><br>

                                    <label class="form-label" for="observacao">Observação:</label>
                                    <textarea class="form-control" id="observacao" name="observacao"></textarea><br>
                                </form>

                                <form id="gabinetes_form"  method="POST"
                                    style="display: none;">
                                    <input type="hidden" name="nomeproduto" id="nomeproduto_gabinetes">

                                    <label class="form-label" for="codigo_de_barras">Código de Barras:</label>
                                    <input type="text" class="form-control" id="codigo_de_barras"
                                        name="codigo_de_barras"><br>

                                    <label class="form-label" for="modelo">Modelo:</label>
                                    <input type="text" class="form-control" id="modelo" name="modelo"><br>

                                    <label class="form-label" for="marca">Marca:</label>
                                    <input type="text" class="form-control" id="marca" name="marca"><br>

                                    <label class="form-label" for="numero_de_serie">Número de Série:</label>
                                    <input type="text" class="form-control" id="numero_de_serie"
                                        name="numero_de_serie"><br>

                                    <label class="form-label" for="observacao">Observação:</label>
                                    <textarea class="form-control" id="observacao" name="observacao"></textarea><br>

                                </form>

                                <form id="processadores_form"  method="POST"
                                    style="display: none;">
                                    <input type="hidden" name="nomeproduto" id="nomeproduto_processadores">

                                    <label class="form-label" for="codigo_de_barras">Código de Barras:</label>
                                    <input type="text" class="form-control" id="codigo_de_barras"
                                        name="codigo_de_barras"><br>

                                    <label class="form-label" for="modelo">Modelo:</label>
                                    <input type="text" class="form-control" id="modelo" name="modelo"><br>

                                    <label class="form-label" for="marca">Marca:</label>
                                    <input type="text" class="form-control" id="marca" name="marca"><br>

                                    <label class="form-label" for="numero_de_serie">Número de Série:</label>
                                    <input type="text" class="form-control" id="numero_de_serie"
                                        name="numero_de_serie"><br>

                                    <label class="form-label" for="tipo_soquete">Tipo de Soquete:</label>
                                    <input type="text" class="form-control" id="tipo_soquete" name="tipo_soquete"><br>

                                    <label class="form-label" for="observacao">Observação:</label>
                                    <textarea class="form-control" id="observacao" name="observacao"></textarea><br>


                                </form>

                                <form id="monitores_form" method="POST"
                                    style="display: none;">
                                    <input type="hidden" name="nomeproduto" id="nomeproduto_monitores">

                                    <label class="form-label" for="codigo_de_barras">Código de Barras:</label>
                                    <input type="text" class="form-control" id="codigo_de_barras"
                                        name="codigo_de_barras"><br>

                                    <label class="form-label" for="marca">Marca:</label>
                                    <input type="text" class="form-control" id="marca" name="marca"><br>

                                    <label class="form-label" for="modelo">Modelo:</label>
                                    <input type="text" class="form-control" id="modelo" name="modelo"><br>

                                    <label class="form-label" for="numero_de_serie">Número de Série:</label>
                                    <input type="text" class="form-control" id="numero_de_serie"
                                        name="numero_de_serie"><br>

                                    <label class="form-label" for="tamanho_polegadas">Tamanho em Polegadas:</label>
                                    <input type="text" class="form-control" id="tamanho_polegadas"
                                        name="tamanho_polegadas"><br>

                                    <label class="form-label" for="entradas">Entradas:</label>
                                    <input type="text" class="form-control" id="entradas" name="entradas"><br>

                                    <label class="form-label" for="observacao">Observação:</label>
                                    <textarea class="form-control" id="observacao" name="observacao"></textarea><br>


                                </form>

                                <form id="ram_form" method="POST" style="display: none;">
                                    <input type="hidden" name="nomeproduto" id="nomeproduto_ram">
                                
                                    <label class="form-label" for="codigo_de_barras">Código de Barras:</label>
                                    <input type="text" class="form-control" id="codigo_de_barras" name="codigo_de_barras"><br>
                                
                                    <label class="form-label" for="tipo">Tipo:</label>
                                    <div class="input-group mb-3">
                                        <select class="form-select" aria-label="Default select example" name="tipo" id="tipo">
                                            <option selected>Tipo da RAM</option>
                                            <option value="Desktop">Desktop</option>
                                            <option value="Notebook">Notebook</option>
                                        </select>
                                    </div>
                                
                                    <label class="form-label" for="marca">Marca:</label>
                                    <input type="text" class="form-control" id="marca" name="marca"><br>
                                
                                    <label class="form-label" for="modelo">Modelo:</label>
                                    <input type="text" class="form-control" id="modelo" name="modelo"><br>
                                
                                    <label class="form-label" for="ddr">DDR:</label>
                                    <input type="text" class="form-control" id="ddr" name="ddr"><br>
                                
                                    <label class="form-label" for="numero_de_serie">Número de Série:</label>
                                    <input type="text" class="form-control" id="numero_de_serie" name="numero_de_serie"><br>
                                
                                    <label class="form-label" for="frequencia">Frequência:</label>
                                    <input type="text" class="form-control" id="frequencia" name="frequencia"><br>
                                
                                    <label class="form-label" for="capacidade">Capacidade:</label>
                                    <input type="text" class="form-control" id="capacidade" name="capacidade"><br>
                                
                                    <label class="form-label" for="observacao">Observação:</label>
                                    <textarea class="form-control" id="observacao" name="observacao"></textarea><br>
                                </form>
                                

                                <form id="nobreaks_form"  method="POST"
                                    style="display: none;">
                                    <input type="hidden" name="nomeproduto" id="nomeproduto_nobreaks">

                                    <label class="form-label" for="codigo_de_barras">Código de Barras:</label>
                                    <input type="text" class="form-control" id="codigo_de_barras"
                                        name="codigo_de_barras"><br>

                                    <label class="form-label" for="marca">Marca:</label>
                                    <input type="text" class="form-control" id="marca" name="marca"><br>

                                    <label class="form-label" for="modelo">Modelo:</label>
                                    <input type="text" class="form-control" id="modelo" name="modelo"><br>

                                    <label class="form-label" for="numero_de_serie">Número de Série:</label>
                                    <input type="text" class="form-control" id="numero_de_serie"
                                        name="numero_de_serie"><br>

                                    <label class="form-label" for="potencia">Potência:</label>
                                    <input type="text" class="form-control" id="potencia" name="potencia"><br>

                                    <label class="form-label" for="autonomia">Autonomia:</label>
                                    <input type="text" class="form-control" id="autonomia" name="autonomia"><br>

                                    <label class="form-label" for="tensao_entrada">Tensão de Entrada:</label>
                                    <input type="text" class="form-control" id="tensao_entrada"
                                        name="tensao_entrada"><br>

                                    <label class="form-label" for="tensao_saida">Tensão de Saída:</label>
                                    <input type="text" class="form-control" id="tensao_saida" name="tensao_saida"><br>

                                    <label class="form-label" for="capacidade_bateria">Capacidade da Bateria:</label>
                                    <input type="text" class="form-control" id="capacidade_bateria"
                                        name="capacidade_bateria"><br>

                                    <label class="form-label" for="capacidade_bateria_desc">Descrição da Capacidade da
                                        Bateria:</label>
                                    <input type="text" class="form-control" id="capacidade_bateria_desc"
                                        name="capacidade_bateria_desc"><br>

                                    <label class="form-label" for="tipo_bateria">Tipo de Bateria:</label>
                                    <input type="text" class="form-control" id="tipo_bateria" name="tipo_bateria"><br>

                                    <label class="form-label" for="numero_de_baterias">Número de Baterias:</label>
                                    <input type="text" class="form-control" id="numero_de_baterias"
                                        name="numero_de_baterias"><br>

                                    <label class="form-label" for="observacao">Observação:</label>
                                    <textarea class="form-control" id="observacao" name="observacao"></textarea><br>



                                </form>


                            </div>

                        </div>

                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-warning text-white" id="clearFieldsBtn"
                            title="Limpar todos os campos preenchidos"><svg xmlns="http://www.w3.org/2000/svg"
                                width="16" height="16" fill="currentColor" class="bi bi-eraser-fill"
                                viewBox="0 0 16 16">
                                <path
                                    d="M8.086 2.207a2 2 0 0 1 2.828 0l3.879 3.879a2 2 0 0 1 0 2.828l-5.5 5.5A2 2 0 0 1 7.879 15H5.12a2 2 0 0 1-1.414-.586l-2.5-2.5a2 2 0 0 1 0-2.828zm.66 11.34L3.453 8.254 1.914 9.793a1 1 0 0 0 0 1.414l2.5 2.5a1 1 0 0 0 .707.293H7.88a1 1 0 0 0 .707-.293z" />
                            </svg></button>
                        <!-- <button type="button" class="btn btn-info text-white" id="combinedBtn"
                title="Adicionar limpando todos os campos preenchidos"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil" viewBox="0 0 16 16">
                    <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325"/>
                  </svg></button> -->
                        <button class="btn btn-success" type="submit" id="addItemBtn"
                            title="Adicionar sem apagar todos os campos preenchidos"><svg
                                xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-pencil-fill" viewBox="0 0 16 16">
                                <path
                                    d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.5.5 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11z" />
                            </svg></button>

                            <script>
                                document.getElementById('submit_form').addEventListener('click', function () {
                                    // Verifica qual formulário está visível
                                    var visibleForm = document.querySelector('form:not([style*="display: none"])');
                                    if (visibleForm) {
                                        // Obtém o valor do campo 'nomeproduto' do formulário visível
                                        var nomeproduto = visibleForm.querySelector('[name="nomeproduto"]').value;
                                        // Atualiza o campo 'nomeproduto' do formulário visível com o valor correto
                                        document.getElementById('nomeproduto').value = nomeproduto;
                                        // Submete o formulário visível
                                        visibleForm.submit();
                                    }
                                });
                            </script>
                            
                        <button type="button" class="btn btn-danger" data-bs-dismiss="modal"><svg
                                xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-x-lg" viewBox="0 0 16 16">
                                <path
                                    d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z" />
                            </svg></button>
                    </div>
                </div>
            </div>
        </div>

        <section class="dados">
            <div class="mt-4"></div>

            <div ">
                <div class=" p-3 tabelas">
                <!-- Tabela para placas de vídeo -->
                <h2>Tabela para placas de vídeo</h2>
                <br>
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th scope="col">Nome do Produto</th>
                            <th scope="col">Código de Barras</th>
                            <th scope="col">Marca</th>
                            <th scope="col">Modelo</th>
                            <th scope="col">DDR</th>
                            <th scope="col">Número de Série</th>
                            <th scope="col">Portas de Saída</th>
                            <th scope="col">Observação</th>
                            <th scope="col">Anotações</th>
                        </tr>
                    </thead>
                    <tbody id="placas-video-table-body"></tbody>
                </table>
            </div>

            <hr>
            <div class="p-3 tabelas">
                <h2>Tabela para placas mãe</h2>
                <br>
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th scope="col">Nome do Produto</th>
                            <th scope="col">Código de Barras</th>
                            <th scope="col">Marca</th>
                            <th scope="col">Modelo</th>
                            <th scope="col">Número de Série</th>
                            <th scope="col">Tipo de Soquete</th>
                            <th scope="col">Slots de Memória</th>
                            <th scope="col">Observação</th>
                            <th scope="col">Anotações</th>
                        </tr>
                    </thead>
                    <tbody id="placas-mae-table-body"></tbody>
                </table>
            </div>
            <hr>
            <div class="p-3 tabelas">
                <h2>Tabela para fontes</h2>
                <br>
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th scope="col">Nome do Produto</th>
                            <th scope="col">Código de Barras</th>
                            <th scope="col">Tipo</th>
                            <th scope="col">Modelo</th>
                            <th scope="col">Marca</th>
                            <th scope="col">Número de Série</th>
                            <th scope="col">Potência (Watts)</th>
                            <th scope="col">Amperagem</th>
                            <th scope="col">Observação</th>
                            <th scope="col">Anotações</th>
                        </tr>
                    </thead>
                    <tbody id="fontes-table-body"></tbody>
                </table>
            </div>

            <hr>
            <div class="p-3 tabelas">
                <h2>Tabela para gabinetes</h2>
                <br>
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th scope="col">Nome do Produto</th>
                            <th scope="col">Código de Barras</th>
                            <th scope="col">Modelo</th>
                            <th scope="col">Marca</th>
                            <th scope="col">Número de Série</th>
                            <th scope="col">Observação</th>
                            <th scope="col">Anotações</th>
                        </tr>
                    </thead>
                    <tbody id="gabinetes-table-body"></tbody>
                </table>
            </div>

            <hr>
            <div class="p-3 tabelas">
                <h2>Tabela para processadores</h2>
                <br>
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th scope="col">Nome do Produto</th>
                            <th scope="col">Código de Barras</th>
                            <th scope="col">Modelo</th>
                            <th scope="col">Marca</th>
                            <th scope="col">Número de Série</th>
                            <th scope="col">Tipo de Soquete</th>
                            <th scope="col">Observação</th>
                            <th scope="col">Anotações</th>
                        </tr>
                    </thead>
                    <tbody id="processadores-table-body"></tbody>
                </table>
            </div>

            <hr>
            <div class="p-3 tabelas">
                <h2>Tabela para monitores</h2>
                <br>
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th scope="col">Nome do Produto</th>
                            <th scope="col">Código de Barras</th>
                            <th scope="col">Marca</th>
                            <th scope="col">Modelo</th>
                            <th scope="col">Número de Série</th>
                            <th scope="col">Tamanho (polegadas)</th>
                            <th scope="col">Entradas</th>
                            <th scope="col">Observação</th>
                            <th scope="col">Anotações</th>
                        </tr>
                    </thead>
                    <tbody id="monitores-table-body"></tbody>
                </table>
            </div>
            <hr>
            <div class="p-3 tabelas">
                <h2>Tabela para memórias RAM</h2>
                <br>
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th scope="col">Nome do Produto</th>
                            <th scope="col">Código de Barras</th>
                            <th scope="col">Tipo</th>
                            <th scope="col">Marca</th>
                            <th scope="col">Modelo</th>
                            <th scope="col">DDR</th>
                            <th scope="col">Número de Série</th>
                            <th scope="col">Frequência</th>
                            <th scope="col">Capacidade</th>
                            <th scope="col">Observação</th>
                            <th scope="col">Anotações</th>
                        </tr>
                    </thead>
                    <tbody id="memorias-ram-table-body"></tbody>
                </table>
            </div>
            <hr>
            <div class="p-3 tabelas">
                <h2>Tabela para Nobreaks</h2>
                <br>
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th scope="col">Nome do Produto</th>
                            <th scope="col">Código de Barras</th>
                            <th scope="col">Marca</th>
                            <th scope="col">Modelo</th>
                            <th scope="col">Potência</th>
                            <th scope="col">Autonomia</th>
                            <th scope="col">Tensão de Entrada</th>
                            <th scope="col">Tensão de Saída</th>
                            <th scope="col">Número de Série</th>
                            <th scope="col">Capacidade</th>
                            <th scope="col">Descrição da Capacidade da Bateria</th>
                            <th scope="col">Tipo de Bateria</th>
                            <th scope="col">Número de Baterias</th>
                            <th scope="col">Observação</th>


                        </tr>
                    </thead>
                    <tbody id="nobreaks-table-body"></tbody>
                </table>
            </div>
        </section>



        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>

        

        <script>
            // Função para buscar e exibir dados em uma tabela
            function fetchTableData(tableId, tbodyId, createRowFunction) {
                fetch(`/recuperar/${tableId}`)
                    .then(response => response.json())
                    .then(data => {
                        console.log(data); // Exibe os dados no console para depuração
                        const tableBody = document.getElementById(tbodyId);
                        tableBody.innerHTML = ''; // Limpa o corpo da tabela antes de adicionar os novos dados
                        data.forEach(item => {
                            const row = createRowFunction(item); // Cria uma nova linha da tabela com os dados do item
                            tableBody.innerHTML += row; // Adiciona a linha ao corpo da tabela
                        });
                    })
                    .catch(error => console.error('Erro ao recuperar dados:', error));
            }

            // Funções para criar linhas das tabelas com os dados fornecidos
            function createPlacasVideoRow(data) {
                return `
                    <tr>
                        <td>${data.nomeproduto}</td>
                        <td>${data.codigo_de_barras}</td>
                        <td>${data.marca}</td>
                        <td>${data.modelo}</td>
                        <td>${data.ddr || '-'}</td>
                        <td>${data.numero_de_serie || '-'}</td>
                        <td>${data.portas_saida || '-'}</td>
                        <td>${data.observacao || '-'}</td>
                    </tr>
                `;
            }

            function createPlacasMaeRow(data) {
                return `
                    <tr>
                        <td>${data.nomeproduto}</td>
                        <td>${data.codigo_de_barras}</td>
                        <td>${data.marca}</td>
                        <td>${data.modelo}</td>
                        <td>${data.numero_de_serie || '-'}</td>
                        <td>${data.tipo_soquete || '-'}</td>
                        <td>${data.slots_de_memoria || '-'}</td>
                        <td>${data.observacao || '-'}</td>
                    </tr>
                `;
            }

            function createFontesRow(data) {
                return `
                    <tr>
                        <td>${data.nomeproduto}</td>
                        <td>${data.tipo || '-'}</td>
                        <td>${data.codigo_de_barras}</td>
                        <td>${data.modelo}</td>
                        <td>${data.marca}</td>
                        <td>${data.numero_de_serie || '-'}</td>
                        <td>${data.potencia_watts || '-'}</td>
                        <td>${data.amperagem || '-'}</td>
                        <td>${data.observacao || '-'}</td>
                    </tr>
                `;
            }

            function createGabinetesRow(data) {
                return `
                    <tr>
                        <td>${data.nomeproduto}</td>
                        <td>${data.codigo_de_barras}</td>
                        <td>${data.modelo}</td>
                        <td>${data.marca}</td>
                        <td>${data.numero_de_serie || '-'}</td>
                        <td>${data.observacao || '-'}</td>
                    </tr>
                `;
            }

            function createProcessadoresRow(data) {
                return `
                    <tr>
                        <td>${data.nomeproduto}</td>
                        <td>${data.codigo_de_barras}</td>
                        <td>${data.modelo}</td>
                        <td>${data.marca}</td>
                        <td>${data.numero_de_serie || '-'}</td>
                        <td>${data.tipo_soquete || '-'}</td>
                        <td>${data.observacao || '-'}</td>
                    </tr>
                `;
            }

            function createMonitoresRow(data) {
                return `
                    <tr>
                        <td>${data.nomeproduto}</td>
                        <td>${data.codigo_de_barras}</td>
                        <td>${data.marca}</td>
                        <td>${data.modelo}</td>
                        <td>${data.numero_de_serie || '-'}</td>
                        <td>${data.tamanho_polegadas || '-'}</td>
                        <td>${data.entradas || '-'}</td>
                        <td>${data.observacao || '-'}</td>
                    </tr>
                `;
            }

            function createMemoriasRamRow(data) {
                return `
                    <tr>
                        <td>${data.nomeproduto}</td>
                        <td>${data.tipo || '-'}</td>
                        <td>${data.codigo_de_barras}</td>
                        <td>${data.marca}</td>
                        <td>${data.modelo}</td>
                        <td>${data.ddr || '-'}</td>
                        <td>${data.numero_de_serie || '-'}</td>
                        <td>${data.frequencia || '-'}</td>
                        <td>${data.capacidade || '-'}</td>
                        <td>${data.observacao || '-'}</td>
                    </tr>
                `;
            }

            function createNobreaksRow(data) {
                return `
                    <tr>
                        <td>${data.nomeproduto}</td>
                        <td>${data.codigo_de_barras}</td>
                        <td>${data.marca}</td>
                        <td>${data.modelo}</td>
                        <td>${data.potencia || '-'}</td>
                        <td>${data.autonomia || '-'}</td>
                        <td>${data.tensao_entrada || '-'}</td>
                        <td>${data.tensao_saida || '-'}</td>
                        <td>${data.numero_de_serie || '-'}</td>
                        <td>${data.capacidade_bateria || '-'}</td>
                        <td>${data.capacidade_bateria_desc || '-'}</td>
                        <td>${data.tipo_bateria || '-'}</td>
                        <td>${data.numero_de_baterias || '-'}</td>
                        <td>${data.observacao || '-'}</td>
                    </tr>
                `;
            }

            // Mapeamento de IDs de tabela para IDs de corpo da tabela e funções de criação de linha
            const tableMappings = {
                'placas_video': { 'tableBodyId': 'placas-video-table-body', 'createRowFunction': createPlacasVideoRow },
                'placas_mae': { 'tableBodyId': 'placas-mae-table-body', 'createRowFunction': createPlacasMaeRow },
                'fontes': { 'tableBodyId': 'fontes-table-body', 'createRowFunction': createFontesRow },
                'gabinetes': { 'tableBodyId': 'gabinetes-table-body', 'createRowFunction': createGabinetesRow },
                'processadores': { 'tableBodyId': 'processadores-table-body', 'createRowFunction': createProcessadoresRow },
                'monitores': { 'tableBodyId': 'monitores-table-body', 'createRowFunction': createMonitoresRow },
                'memorias_ram': { 'tableBodyId': 'memorias-ram-table-body', 'createRowFunction': createMemoriasRamRow },
                'nobreaks': { 'tableBodyId': 'nobreaks-table-body', 'createRowFunction': createNobreaksRow },
            };

            // Função para carregar os dados de uma tabela quando ela se torna visível
            function lazyLoadTableData() {
                for (const tableId in tableMappings) {
                    const { tableBodyId, createRowFunction } = tableMappings[tableId];
                    const tableBody = document.getElementById(tableBodyId);
                    const observer = new IntersectionObserver(entries => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                fetchTableData(tableId, tableBodyId, createRowFunction);
                                observer.unobserve(entry.target);
                            }
                        });
                    });
                    observer.observe(tableBody);
                }
            }

            // Chame a função para carregar os dados das tabelas quando necessário
            lazyLoadTableData();

        </script>




        <script>
 document.querySelectorAll('.dropdown-item').forEach(item => {
    item.addEventListener('click', event => {
        const selectedItem = event.target.getAttribute('data-item');
        document.getElementById('nomeproduto').value = selectedItem;
        document.getElementById('dropdownMenuButton').innerText = selectedItem;

        // Lógica para exibir os campos dinâmicos
        let dynamicContent = '';
        switch (selectedItem) {
            case 'Memória RAM':
                dynamicContent += `
                    <!-- Campos para Memória RAM -->
                `;
                break;
            case 'Monitor':
                dynamicContent += `
                    <!-- Campos para Monitor -->
                `;
                break;
            case 'Processador':
                dynamicContent += `
                    <!-- Campos para Processador -->
                `;
                break;
            case 'Gabinete':
                dynamicContent += `
                    <!-- Campos para Gabinete -->
                `;
                break;
            case 'Fonte':
                dynamicContent += `
                    <!-- Campos para Fonte -->
                `;
                break;
            case 'motherboard':
                dynamicContent += `
                    <!-- Campos para Placa Mãe -->
                `;
                break;
            case 'gpu':
                dynamicContent += `
                    <!-- Campos para Placa de Vídeo -->
                `;
                break;
            default:
                break;
        }
        document.getElementById('dynamicFields').innerHTML = dynamicContent;
    });
});

document.getElementById('myForm').addEventListener('submit', function (event) {
    event.preventDefault();

    var formData = new FormData(this);
    var categoriaSelecionada = formData.get('nomeproduto');

    // Aqui você pode manipular os dados do formulário com JavaScript
    console.log('Categoria selecionada:', categoriaSelecionada);
    console.log('Dados do formulário:', formData);
});

        </script>

</body>

</html>



























app.get('/dadosItens', (req, res) => {
    // Consultar o banco de dados para obter uma lista de tabelas
    db.all("SELECT name FROM sqlite_master WHERE type='table' AND name NOT IN ('categorias', 'tabelas', 'usuarios', 'sqlite_sequence', 'notificacoes')", (err, rows) => {
        if (err) {
            console.error('Erro ao buscar tabelas:', err.message);
            return res.status(500).json({ error: 'Erro ao buscar tabelas' });
        }

        // Extrair os nomes das tabelas da resposta do banco de dados
        const tabelasDesejadas = rows.map(row => row.name);

        // Se não houver nenhuma tabela disponível, retornar um erro
        if (tabelasDesejadas.length === 0) {
            console.error('Nenhuma tabela disponível.');
            return res.status(400).json({ error: 'Nenhuma tabela disponível' });
        }

        // Construir a consulta para obter os dados das tabelas desejadas
        const query = `SELECT categoria, codigo_de_barras, marca, modelo FROM ${tabelasDesejadas.join(' UNION SELECT categoria, codigo_de_barras, marca, modelo FROM ')}`;
        
        // Executar a consulta no banco de dados
        db.all(query, (err, rows) => {
            if (err) {
                console.error('Erro ao buscar dados dos itens:', err.message);
                return res.status(500).json({ error: 'Erro ao buscar dados dos itens' });
            }
            res.json(rows);
        });
    });
});



app.get('/pesquisarItens', (req, res) => {
    const categoria = req.query.categoria; // Obter o parâmetro 'categoria' da consulta
    const codigoBarras = req.query.codigoBarras; // Obter o parâmetro 'codigoBarras' da consulta

    // Consultar o banco de dados para obter uma lista de todas as tabelas, excluindo algumas
    db.all("SELECT name FROM sqlite_master WHERE type='table' AND name NOT IN ('categorias', 'tabelas', 'usuarios', 'sqlite_sequence', 'notificacoes')", (err, rows) => {
        if (err) {
            console.error('Erro ao buscar tabelas:', err.message);
            return res.status(500).json({ error: 'Erro ao buscar tabelas' });
        }

        // Extrair os nomes das tabelas da resposta do banco de dados
        const tabelas = rows.map(row => row.name);

        // Se não houver nenhuma tabela disponível, retornar um erro
        if (tabelas.length === 0) {
            console.error('Nenhuma tabela disponível.');
            return res.status(400).json({ error: 'Nenhuma tabela disponível' });
        }

        // Construir a consulta SQL para buscar itens em todas as tabelas
        let query = '';

        // Construir a cláusula WHERE para aplicar o filtro de categoria e/ou código de barras
        let whereClause = '';
        if (categoria && codigoBarras) {
            whereClause = `WHERE categoria LIKE '%${categoria}%' OR codigo_de_barras LIKE '%${codigoBarras}%'`;
        } else if (categoria) {
            whereClause = `WHERE categoria LIKE '%${categoria}%'`;
        } else if (codigoBarras) {
            whereClause = `WHERE codigo_de_barras LIKE '%${codigoBarras}%'`;
        }

        // Construir a consulta SQL dinamicamente para cada tabela, exceto as especificadas
        const queries = tabelas.map(tabela => `SELECT categoria, codigo_de_barras, marca, modelo FROM ${tabela} ${whereClause}`);

        // Unir as consultas de todas as tabelas usando UNION ALL
        query = queries.join(' UNION ALL ');

        // Executar a consulta no banco de dados
        db.all(query, (err, rows) => {
            if (err) {
                console.error('Erro ao buscar itens:', err.message);
                return res.status(500).json({ error: 'Erro ao buscar itens' });
            }
            res.json(rows);
        });
    });
});
